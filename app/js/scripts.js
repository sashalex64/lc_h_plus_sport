var Modal=function(){var e,t=function(e,t,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,o)};return{init:function(){document.getElementsByClassName&&(this.handleImages(),this.addClass())},handleImages:function(){var e=document.getElementById("products");if(e)for(var o=e.getElementsByClassName("product-item"),a=0,l=o.length;a<l;a++){var d=o[a].getElementsByTagName("img")[0];d&&(d.setAttribute("tabindex",0),t("click",d,this.handleOpenModal),t("keydown",d,this.handleOpenModal),t("keyup",d,this.focusModalClose))}},getKey:function(e){var t=e.keyCode;return!t&&e.detail&&(t=e.detail.key),!t&&e.detail&&(t=""),t},handleOpenModal:function(e){var t=e.type,o=e.target;if("keydown"===t){var a=Modal.getKey(e);13!==a&&32!==a||(Modal.openModal(o,t),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())}"click"===t&&Modal.openModal(o,t)},focusModalClose:function(e){var t=Modal.getKey(e);13!==t&&32!==t||Modal.close.focus()},openModal:function(o,a){var l,d=document.getElementById("modal");if(e=o,!d){d=document.createElement("div"),d.id="modal",d.style.display="none",Modal.close=document.createElement("button"),Modal.close.setAttribute("tabindex",0),Modal.close.innerHTML="Close",d.appendChild(Modal.close),l=document.createElement("img"),d.appendChild(l);var n=document.createElement("div");n.setAttribute("class","backdrop"),d.appendChild(n),document.body.appendChild(d),t("click",Modal.close,this.handleCloseModal),t("keydown",Modal.close,this.handleCloseModal)}l||(l=d.getElementsByTagName("img")[0]),l.src=o.src,d.style.display="block","click"===a&&Modal.close.focus()},handleCloseModal:function(e){var t=e.type;e.target;if("keydown"===t){var o=e.keyCode;!o&&e.detail&&(o=e.detail.key),!o&&e.detail&&(o=""),13!==o&&27!==o&&32!==o||(Modal.closeModal(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())}"click"===t&&Modal.closeModal()},closeModal:function(){document.getElementById("modal").style.display="none",e.focus()},addClass:function(){var e=document.body.getAttribute("class")||"";document.body.setAttribute("class",e+" modal-supported")}}}();window.onload=function(){Modal.init()};